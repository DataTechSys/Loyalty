<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width,initial-scale=1"/>
        <link rel="icon" href="images/datatech-ico.ico">
        <title>Messages · Loyalty Console</title>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
        <link href="css/style.css" rel="stylesheet">
    </head>
    <body>
        <div class="layout">
            <aside class="sidebar" id="sidebar">
                <div class="sb-brand">
                    <img src="images/DataTech.png" alt="">
                    <span class="brand-text">Loyalty Console</span>
                </div>
                <nav class="sb-nav"><a class="sb-link" href="dashboard.html"><i class="fa-solid fa-gauge-high"></i><span class="sb-text">Dashboard</span></a><a class="sb-link" href="orders.html"><i class="fa-solid fa-cart-shopping"></i><span class="sb-text">Orders</span></a><a class="sb-link" href="customers.html"><i class="fa-solid fa-users"></i><span class="sb-text">Customers</span></a><a class="sb-link active" href="messages.html"><i class="fa-solid fa-paper-plane"></i><span class="sb-text">Messages</span></a><a class="sb-link" href="reports.html"><i class="fa-solid fa-chart-line"></i><span class="sb-text">Reports</span></a><a class="sb-link" href="settings.html"><i class="fa-solid fa-gear"></i><span class="sb-text">Settings</span></a><a class="sb-link" href="admin.html"><i class="fa-solid fa-user-shield"></i><span class="sb-text">Admin</span></a>
                </nav>
                <div class="sb-footer">© DataTech</div>
            </aside>
            <div class="main">
                <header class="dt-topbar">
                    <div class="tb-inner container d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center gap-2">
                            <button class="btn-icon burger" id="burger">☰</button>
                            <button class="btn-icon" id="collapseBtn">
                                <i class="fa-solid fa-bars"></i>
                            </button>
                        </div>
                        <div></div>
                        <div class="userchip-wrap"></div>
                    </div>
                </header>
                <main class="page">
                    <div class="container-narrow">
                        <div class="d-flex align-items-center justify-content-between mb-2">
                            <div>
                                <h1 class="h5 fw-bold mb-0">Messages</h1>
                                <div class="text-muted small">Create and review campaigns</div>
                            </div>
                            <button class="btn btn-primary btn-sm" id="newCampaign">
                                <i class="fa-solid fa-paper-plane me-1"></i>New Campaign
                            </button>
                        </div>
                        <div class="dt-card p-card">
                            <div class="table-responsive">
                                <table class="table align-middle mb-0">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Audience</th>
                                            <th>Sent</th>
                                            <th class="text-end">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="msgBody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script>
  (function(){
    const sidebar=document.getElementById('sidebar');
    document.getElementById('burger')?.addEventListener('click',()=> sidebar.classList.toggle('open'));
    document.getElementById('collapseBtn')?.addEventListener('click',()=> sidebar.classList.toggle('collapsed'));
    sidebar?.querySelectorAll('a.sb-link').forEach(a=>a.addEventListener('click',()=> sidebar.classList.remove('open')));
  })();
</script>
        <script src="js/app-user.js"></script>
        <script>
 (function(){
   if (window.UserSession && !window.UserSession.isAuthenticated()){
     sessionStorage.setItem('redirectAfterLogin','messages.html'); location.replace('login.html'); return;
   }
   const msgs=[
     {name:'Weekend Promo', audience:'All', sent:'3,140', status:'Sent'},
     {name:'VIP Push', audience:'Gold tier', sent:'420', status:'Scheduled'},
   ];
   msgBody.innerHTML = msgs.map(m=>`
     <tr>
       <td class="fw-semibold">${m.name}</td>
       <td>${m.audience}</td>
       <td>${m.sent}</td>
       <td class="text-end"><span class="badge text-bg-${m.status==='Sent'?'success':'secondary'}">${m.status}</span></td>
     </tr>`).join('');
   newCampaign.addEventListener('click',()=>alert('Demo: open campaign composer'));
 })();
</script>
    </body>
</html>