<!doctype html>
<html lang="en" data-pgc-master="master.html">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>Customers — Loyalty Console</title>
        <!-- Brand icon (optional) -->
        <link rel="preload" href="images/DataTech.png" as="image"/>
        <!-- Bootstrap & app styles -->
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
        <link href="css/style.css" rel="stylesheet"/>
        <style>
    /* Page-specific sugar */
    .page-title { font-weight: 700; }
    .toolbar .form-control { max-width: 320px; }
    .nav-pills .nav-link { border-radius: 10px; }
    .card-table { border-radius: 14px; }
    .table thead th { font-size: .825rem; color:#6c757d; font-weight:600; }
    .table td { vertical-align: middle; }
    .table .text-muted { color:#6c757d !important; }
    .sticky-actions {
      position: sticky; right: 0; background: #fff; z-index: 2;
    }
    .spinner-wrap{min-height:160px}
  </style>
    </head>
    <body>
        <main class="container-fluid py-4" data-pg-slot="main-content">
            <!-- Header -->
            <div class="d-flex align-items-center justify-content-between mb-3">
                <h1 class="h4 page-title mb-0">Customers</h1>
                <div class="d-flex align-items-center gap-2">
                    <div class="dropdown">
                        <button class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                            Import / Export
</button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <a class="dropdown-item" href="#" id="btnImport">Import CSV</a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#" id="btnExport">Export CSV</a>
                            </li>
                        </ul>
                    </div>
                    <button class="btn btn-primary" id="btnAddCustomer">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg me-1" viewBox="0 0 16 16">
                            <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"/>
                        </svg>
                        Add Customer
                    </button>
                </div>
            </div>
            <!-- Top toolbar -->
            <div class="toolbar d-flex align-items-center justify-content-between mb-2">
                <ul class="nav nav-pills gap-1" id="filterTabs">
                    <li class="nav-item">
                        <button class="nav-link active" data-filter="all">All</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-filter="hasOrders">Has Orders</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-filter="negative">Has Negative Balance</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-filter="blacklisted">Blacklisted</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-filter="deleted">Deleted</button>
                    </li>
                </ul>
                <div class="d-flex align-items-center gap-2">
                    <div class="input-group"><span class="input-group-text bg-white border-end-0"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 
                 1.415-1.414l-3.85-3.85zm-5.242 1.106a5 5 0 1 1 
                 0-10 5 5 0 0 1 0 10z"/>
                            </svg> </span>
                        <input class="form-control border-start-0" type="search" id="q" placeholder="Search customers…"/>
                    </div>
                    <button class="btn btn-outline-secondary" id="btnFilter">
                        Filter
</button>
                </div>
            </div>
            <!-- Table card -->
            <div class="card card-table shadow-sm">
                <div class="table-responsive">
                    <table class="table align-middle mb-0">
                        <thead class="bg-light">
                            <tr>
                                <th style="width:36px">
                                    <input class="form-check-input" type="checkbox" id="checkAll"/>
                                </th>
                                <th style="min-width:260px">Name</th>
                                <th style="min-width:140px">Phone</th>
                                <th style="min-width:200px">Email</th>
                                <th style="min-width:120px">Total Orders</th>
                                <th style="min-width:180px">Last Order</th>
                                <th style="min-width:150px">Account Balance</th>
                                <th class="text-end sticky-actions" style="width:56px"></th>
                            </tr>
                        </thead>
                        <tbody id="rows">
                            <tr id="loadingRow">
                                <td colspan="8">
                                    <div class="spinner-wrap d-flex align-items-center justify-content-center py-5">
                                        <div class="spinner-border" role="status"></div><span class="ms-2 text-muted">Loading…</span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- Footer -->
                <div class="d-flex align-items-center justify-content-between p-3 border-top"><small class="text-muted" id="showingText">Showing 0</small>
                    <div class="btn-group">
                        <button class="btn btn-outline-secondary btn-sm" id="btnPrev">Previous</button>
                        <button class="btn btn-outline-secondary btn-sm" id="btnNext">Next</button>
                    </div>
                </div>
            </div>
        </main>
        <!-- Scripts -->
        <script src="js/config.js"></script>
        <script src="js/rbac.js"></script>
        <script src="js/app-auth.js"></script>
        <script src="js/app.js"></script>
        <!-- Page logic -->
        <script src="js/pages/members-page.js"></script>
        <!-- Bootstrap JS (after page code is fine too) -->
        <script src="bootstrap/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
