<script>
(function(){
  const publicPages = ['login.html','index.html'];
  const file = location.pathname.split('/').pop().toLowerCase();
  const isPublic = publicPages.includes(file);
  if (!isPublic) {
    const s = (window.RBAC && RBAC.session) ? RBAC.session() : null;
    if (!s) {
      sessionStorage.setItem('redirectAfterLogin', location.pathname + location.search);
      // redirect only if not already on login
      var base = location.pathname.replace(/[^\/]*$/, '');
      location.replace(base + 'login.html');
    }
  }
})();
</script>
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>Loyalty Console</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">
        <script src="js/app-auth.js"></script>
        <script src="js/config.js"></script>
        <script src="js/api.js"></script>
        <script>
    (function(){
      const publicPages = ['login.html','index.html'];
      const isPublic = publicPages.some(p => location.pathname.endsWith(p));
      if(!isPublic){
        const s = RBAC.session();
        if(!s){
          sessionStorage.setItem('redirectAfterLogin', location.pathname + location.search);
          location.replace('login.html'); return;
        }
      }
    })();
  </script>
    </head>
    <body>
        <div data-pg-component="app-header" data-pg-source="/_components/app-header.html"></div>
        <div class="container-fluid content-wrap">
            <div class="row">
                <div class="col-md-3 col-lg-2 p-0 bg-light">
                    <div data-pg-component="app-sidebar" data-pg-source="/_components/app-sidebar.html"></div>
                </div>
                <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-3" data-pg-region="main-content">
                    <h1 class="h3">Page</h1>
                </main>
            </div>
        </div>
        <footer class="border-top py-3 text-center small text-muted">Â© <span id="yr"></span> DataTech
        </footer>
        <script>document.getElementById('yr').textContent = new Date().getFullYear();</script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
